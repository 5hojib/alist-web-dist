import{f as C,v as t,B as y,b5 as O,ap as f,ao as D,a4 as I,ar as R,a5 as i,I as E,b_ as F,T as A,b7 as N,b8 as _,b9 as P,ba as Y,bb as B,bc as V,bd as H,P as M,be as j,bf as q,bg as z,J as G,bh as J,u as K,aR as S,bk as d,bL as Q,c4 as U,w as W,c5 as X,j as Z,bq as h,n as k,aa as p,L as v,a7 as ee}from"./index.0dd4a88f.js";import{l as te}from"./index.de637a18.js";import{F as c}from"./index.fe95e79d.js";import{T as g,R as ne}from"./ResponsiveGrid.4d46564f.js";import{n as ae}from"./index.f0f98b5f.js";const re=e=>{const r=C();return t(J,{get w(){var n;return(n=e.w)!=null?n:"100%"},display:"flex",flexDirection:"column",get children(){return[t(y,{get when(){return!e.hideLabel},get children(){return t(O,{get for(){return e.key},display:"flex",alignItems:"center",get children(){return[f(()=>r(`settings.${e.key}`)),t(y,{get when(){return e.flag===c.DEPRECATED},get children(){return t(D,{ml:"$2",as:ae,boxSize:"$5",color:"$danger9",verticalAlign:"middle",cursor:"pointer",onClick:()=>{var n;(n=e.onDelete)==null||n.call(e)}})}})]}})}}),t(I,{get fallback(){return t(R,{get children(){return r("settings_other.unknown_type")}})},get children(){return[t(i,{get when(){return[g.String,g.Number].includes(e.type)},get children(){return t(E,{get type(){return e.type===g.Number?"number":""},get id(){return e.key},get value(){return e.value},onInput:n=>{var a;return(a=e.onChange)==null?void 0:a.call(e,n.currentTarget.value)},get readOnly(){return e.flag===c.READONLY}})}}),t(i,{get when(){return e.type===g.Bool},get children(){return t(F,{get id(){return e.key},get defaultChecked(){return e.value==="true"},onChange:n=>{var a;return(a=e.onChange)==null?void 0:a.call(e,n.currentTarget.checked?"true":"false")},get readOnly(){return e.flag===c.READONLY}})}}),t(i,{get when(){return e.type===g.Text},get children(){return t(A,{get id(){return e.key},get value(){return e.value},onChange:n=>{var a;return(a=e.onChange)==null?void 0:a.call(e,n.currentTarget.value)},get readOnly(){return e.flag===c.READONLY}})}}),t(i,{get when(){return e.type===g.Select},get children(){return t(N,{get id(){return e.key},get defaultValue(){return e.value},onChange:n=>{var a;return(a=e.onChange)==null?void 0:a.call(e,n)},get readOnly(){return e.flag===c.READONLY},get children(){return[t(_,{get children(){return[t(P,{get children(){return r("global.choose")}}),t(Y,{}),t(B,{})]}}),t(V,{get children(){return t(H,{get children(){return t(M,{get each(){var n;return(n=e.options)==null?void 0:n.split(",")},children:n=>t(j,{value:n,get children(){return[t(q,{get children(){return r(`settings.${e.key}s.${n}`)}}),t(z,{})]}})})}})}})]}})}})]}}),t(G,{get children(){return f(()=>!!e.help,!0)()?r(`settings.${e.key}-tips`):""}})]}})},de=e=>{const r=C(),{pathname:n}=K();te(`manage.sidemenu.${n().split("/").pop()}`);const[a,w]=S(()=>d.get(`/admin/setting/list?group=${e.group}`)),[o,m]=Q([]),u=async()=>{const l=await w();h(l,m)};u();const[T,$]=S(()=>d.post("/admin/setting/save",U(o))),[L,b]=W(!1);return t(ee,{w:"$full",alignItems:"start",spacing:"$2",get children(){return[t(ne,{get children(){return t(X,{each:o,children:(l,le)=>t(re,Z(l,{onChange:s=>{m(x=>l().key===x.key,"value",s)},onDelete:async()=>{b(!0);const s=await d.post(`/admin/setting/delete?key=${l().key}`);b(!1),h(s,()=>{k.success(r("global.delete_success")),u()})}}))})}}),t(p,{spacing:"$2",get children(){return[t(v,{colorScheme:"accent",onClick:u,get loading(){return a()||L()},get children(){return r("global.refresh")}}),t(v,{get loading(){return T()},onClick:async()=>{const l=await $();h(l,()=>k.success(r("global.save_success")))},get children(){return r("global.save")}})]}})]}})};export{de as default};
